---

layout: post

title: "安洵杯 CTF"

author: "markt"

---

仓促准备下，找了几个人一起参加了这次比赛。36个小时，差不多四道题有思路，但是最后只有一道题照着网上的答案做了出来。当然签到题太简单所以不算。

---

**分割线内是知道答案后的补充**

---

非官方wp：[第一届安洵杯writeup](http://mang0.me/archives/6bd5dfde/)



## 验证码绕过

这道题提示很明显是绕过验证码，实现也很简单，就是返回自某时间节点到现在所有的秒数，然后再添加了一个偏移量就OK，所以实现其实很简单，但是最后卡到了用户名和密码的爆破中。尝试了TOP1500还是不行，可能是账户名不对的问题。

另外还有一个很坑的地方就是后台目录的扫描。刚拿到题的时候简单试了几个后台都不行，没有可以输入的地方所以就放弃了。但是后来jtd来了之后随手一试就试出后台了。。长了个教训：web题第一步除了看源码之外还有扫后台，御剑此时的作用就体现了出来。

---

​	这道题还是差一点。最后还是败在了弱口令上。

​	只能说是没有注意到需要爆破吧。没有burp pro版，  破解速度捉急。

​	另外还是没有扫后台的问题。

---

## 反序列化

这道题可以说是最耻辱的一道了。有了之前的教训，上来就扫后台，然后读源码发现发送经过编码的GET请求就能如何如何，于是乎百度找到了九成九相似的原题，但是照着原题还是做了很久没有做出来，真是傻逼的一批。题目的最后一个步骤是读取文件，但是自己读取的时候在缓存中发现的东西flag_i3_h3re没有后缀名，于是乎就傻乎乎地各种尝试，各种猜测，但是实际上的情况是这是一个目录。当然当时还是有猜到这种情况的，不过限于自身php水平的问题，简单的几次尝试都失败了，就以为这不是个目录，真是菜。

---

没啥可说的了，居然不是目录是文件，而且是直接访问就给下载的那种。

---

## 彩票

这道题说起来耻辱程度完全不亚于上一道。一开始就学乖扫后台，然后就根据提示下载了源码，心里想的是有了源码还能做不出来？但实际上还真的没做出来。玛德。本以为应该是代码逻辑的漏洞，但是仔细读了源码之后还是没有找到可以利用的漏洞。

罗列一下自己当时的思路吧：

1. 绕过注册直接购买（自我感觉最接近成功）
2. 修改购买的金额
3. 直接get或者post得到flag
4. 利用true数组绕过彩票数字相等的鉴定
5. 爆破会话id（没试过）

---

玛德！

这种猜到正确结果却没做出来的结果也太难过了！

就是利用php弱类型！

---

## 图片隐写

根据题目的提示flag就在数据包中，但是自己最终还是没得到想用的东西。自己通过各种网上搜，试，基本上把这道题的思路都发现了，但是还是卡在了后面的一步——从图片中分离出来压缩文件失败了。前边的步骤都是按部就班，后面就只是利用python脚本来解压一个二进制文件。但是python2、python3，windows、kali都试了都返回错误，而且是网上没有见过的那种。而自己又懒得研究具体的函数。报错是数据格式问题，但是自己查的zlib库压缩后的二进制文件的格式发现，其只有文件格式头而没有文件结尾格式要求，但是题目中的文件头却完全符合格式要求，不知道文件格式错在哪里。

---



---

## 总结 

稍微有点进展的题大概就这么四道，但是只有一道靠着答案做了出来，悲惨的结果。

- 需要学习的地方还很多，一是要有知识和套路的积累，二是要有临场迅速了解的能力
- 缺乏一干到底的想法。很多题稍微试了试就放弃了，这四道也没有坚持下去，可能是因为：题太多；既然拿不了奖就见识见识而不是钻牛角尖。不可取。
- 需要分工，需要准备各种工具

题目的话，我做的好多题都没有基础的提示，非要我自己扫后台。当然也可能是自己不太了解CTF中的web，它本身就是这样也有可能。

## 还需学习：

### 差的知识点：

- PHP语法与审计
- SSRF
- Cookie注入
- git泄露

### 关于python脚本的编写

- 多线程
- requests库
- 基础语法！
- ……

### 字典（爆破字典，注入payload字典，web敏感目录字典）

### 御剑等后台扫描软件。特别是kali上集成的。