---

layout: post

title: "《Web前端黑客技术揭秘》笔记"

author: "markt"

---

# 《Web前端黑客技术揭秘》

三种最常见的前端漏洞：XSS、CSRF、界面操作劫持。越往下社工色彩越浓。

## 	            	XSS（跨站脚本（攻击））

​	通过各种方法让用户在客户端的浏览器上使用你的脚本。

分为反射型（经过服务端一来一回故反射）、存储型（存储到服务端）、DOM型（客户端本地执行靠浏览器DOM解析）

由于攻击代码较长，一般都是通过引用第三方的脚本代码。

**反射型和DOM型都是通过修改URL参数来实现的，前者经过服务器端再到客户端，后者直接通过浏览器前端进行页面渲染。反射型和存储型都经过服务器端，但是前者修改的是URL参数，后者是从数据库中直接读出脚本**

## CSRF（跨站请求伪造）

​	核心：利用用户已登录的Cookie。诱导用户访问你的网站从而发出对目标网站的伪造的HTTP请求。



## 界面操作劫持（点击劫持）

​	基于视觉欺骗的Web会话劫持。简单来说就是利用前端知识给目标网站加上一层透明的界面，让用户的操作先通过你构造的劫持界面然后再传到真正的界面。

​	点击劫持、拖放劫持、触屏劫持。

## URL跳转劫持

通过修改不规范的URL参数来实现对可靠的URL的跳转的劫持

修改：

- Header
- JavaScript
- Meta标签

## 前端漏洞挖掘

> 后两种漏洞从本质上来说实际上只能说算是一种利用用户缺陷而进行攻击的方式，从挖掘的角度来讲基本是不用挖的。（因为简单？）只要目标满足一些特点就可以找到。但是从广义上来讲不应该是所有漏洞都是因为目标满足某些特点所以会存在的吗？

###           XSS挖掘

​	URL重定向导致XSS挖掘中人工比例更多。

​	XSS的输出一般会存在于页面标签的各个位置，有可能是标签内标签间甚至是属性值，其所需的payload也有所不同。主要关注点是：1.闭合原本的标签； 2.由于位置的原因能否被执行（浏览器及其不同版本间的解析区别）； 3.是否存在字符过滤和XSS Filter。

​	关注HTML和JavaScript的编码区别，URL的编码差异。

​	了解DOM渲染 → DOM XSS挖掘？（静动态方法）

​	XSF（Flash XSS）挖掘

​	字符集缺陷导致XSS

​	绕过XSS Filter

​	进制混淆代码

## 漏洞利用

 	

# 网易微专业

### SQL注入的本质是数据和代码未分离，数据被当做代码来执行。

### 命令注入

本质上和SQL注入一样，只不过一个是把利用参数来执行数据库查询，而另外一个是把参数作为服务器系统的命令（DOS命令或者LINUX命令）来执行。两者类型相同，但命令注入危害明显更大一些。

需要满足的要求：

可以执行命令（系统函数）→命令可控，可以输入可控的参数参数→可以拼接命令没有被过滤。

### 文件操作漏洞

上传下载都需要限制请求路径和文件名（文件格式）。

### 敏感文件探测：

- 管理后台、数据文件、备份文件、WebShell

一般原理：利用穷举时网站的返回码来判断网站地址是否存在。

一般工具：御剑、nmap

### 综合性Web漏洞扫描器： AWVS、Netsparker、AppScan

### 在线工具：Google Hack、网络空间搜索引擎、站长工具





# 其他

​	payload：可以理解为攻击/测试时的代码段

​	渗透测试时需要关注的比较重要的一个问题就是你测试的输入和输出点在哪里。SQL注入等攻击都是这样，例如在SQL注入中输入主要体现在URL中 ?id=[输入点]，而输出则是在页面的某个标签中，一般都是该网页的主要内容部分。通过输出是否满足预计来判断是否存在该漏洞。

​	fuzzing test（模糊测试）：对于目标的简单的自动化的漏洞测试。简单来说就是利用工具完成一些需要人手工测试的地方。从广义上来讲脚本小子也可以称为是模糊测试的一种，毕竟都是用别人的简单的工具来挖掘一些较为简单且浅的漏洞。进一步的fuzzing测试就是在知道原理的情况下自己写工具脚本来代替人力，毕竟XSS需要判断的东西很多。

​	换个角度来想，不论是扫描端口，SQL注入还是XSS针对不同浏览器不同种类的判断都可以算作是fuzzing的一种。

